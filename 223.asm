CALF MACRO
	PUSH DX
	MOV DL,0AH
	MOV AH,2
	INT 21H
	MOV DL,13
	MOV AH,2
	INT 21H;
	POP DX
ENDM

INPUTNUM MACRO
	LEA DX,BUFF
	MOV AH,0AH
	INT 21H
	XOR BX,BX
	XOR CX,CX
	XOR DX,DX
	MOV CL,CNT			;
ADDTOSUM:
	SHL DX,1	;原数*2
	MOV AX,DX	;AX=原数*2
	SHL DX,1	;DX=原数*4
	SHL DX,1	;DX=原数*8
	ADD DX,AX	;DX=原数*10
	XOR AX,AX
	MOV AL,NUMSTR[BX]	;
	SUB AL,30H
	ADD DX,AX
	INC BX
	LOOP ADDTOSUM
	MOV INPUT,DX		;
	CALF
ENDM


DATAS SEGMENT
    BUFF DB 6
    CNT DB ?
    NUMSTR DB 10 DUP(?)
    INPUT DW 0
    K DB 16
DATAS ENDS

STACKS SEGMENT
	DW 20 DUP(?)
    ;此处输入堆栈段代码
STACKS ENDS

CODES SEGMENT
    ASSUME CS:CODES,DS:DATAS,SS:STACKS
START:
    MOV AX,DATAS
    MOV DS,AX
    ;此处输入代码段代码
    
    INPUTNUM
    CALL TRANSTOK
    
    MOV AH,4CH
    INT 21H
TRANSTOK PROC
	MOV AX,INPUT
	XOR CX,CX
CLASSIFY:
	
	DIV K
	ADD AH,30H
	CMP AH,3AH
	JL	PUS
	ADD AL,7H
PUS:
	PUSH AX
	INC CH
	XOR AH,AH	;置零
	CMP AL,0
	JNZ CLASSIFY
DISPLAY:
	MOV CL,8
	POP DX
	SHR DX,CL
	MOV AH,02H
	INT 21H
	DEC CH
	JNZ DISPLAY
	
	RET
TRANSTOK ENDP
CODES ENDS
    END START
